<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>workspace\templates\partPropScript.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-elements">Elements</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/.html"></a></li>
                                <li><a href="../classes/DataTable.Api.html">DataTable.Api</a></li>
                                <li><a href="../classes/directionConfirmGlobal.html">directionConfirmGlobal</a></li>
                                <li><a href="../classes/partTableGlobal.html">partTableGlobal</a></li>
                                <li><a href="../classes/renderGlobal.html">renderGlobal</a></li>
                            </ul>
                
                                <ul id="api-elements" class="apis elements">
                                    <li><a href="../elements/inputState.html">&lt;inputState&gt;</a></li>
                                </ul>
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: workspace\templates\partPropScript.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
;


if( typeof(startupScripts) == &#x27;undefined&#x27;){

	var startupScripts = {
		&quot;0&quot;:function(){},
		&quot;1&quot;:function(){},
		&quot;2&quot;:function(){},
		&quot;3&quot;:function(){},
		&quot;4&quot;:function(){},
		&quot;5&quot;:function(){},
		&quot;6&quot;:function(){},
		&quot;7&quot;:function(){}
	};

}





// Put recieved data about the parts in here.
// Fills out the table with the information in the given xml document text (as a string, mind you)
/**
*
* Given the contents of a part table XML file (as a string), fills out the table in the web page.
*
* @method part_recieveData
* @for partTableGlobal
* @param {String} theXMLText The contents of a part table
* @return {Void}
*
*/
function part_recieveData(theXMLText){

	var theXML=$.parseXML(theXMLText);
	console.log(theXML);
	var theEntries=part_grab(theXML,&quot;parts_properties&quot;);
	var theEntries=$(theEntries).children(&quot;properties&quot;);
	var pos=0;
	var lim=theEntries.length;
	var name;
	var classif;
	while(pos&lt;lim){
		part_addEntry(theEntries[pos]);
		pos++;
	}
	console.log(theTable);

}



// Gets called when the user submits the table and everything is properly filled out
/**
*
* Is called whenever the user submits the part table and every entry has been
* properly filled out.
*
* @method part_sendData
* @for partTableGlobal
* @param {String} theXMLText The contents of the part table in the webpage, as a string
* in XML formatting
* @return {Void}
*
*/
function part_sendData(theXMLText){

	// Do whatever you want with the resulting data to send it off, if you want


}













// Changes key press states based off of key presses
/**
*
* Accepts a key press event and, if the key press corresponds to one
* of the keys used for manipulating the view, sets the proper components
* of &quot;inputState&quot; to true.
*
* @method part_registerDown
* @for partTableGlobal
*
*
* @param {Event} e The key down event to be supplied to the function by a key down event
* listener on the web page
* @return {Void}
*
*/
function part_registerDown(e){



	var theKey;
	if (e.which == null) {
		theKey= String.fromCharCode(e.keyCode) // IE
	} else if (e.which!=0 /*&amp;&amp; e.charCode!=0*/) {
		theKey= String.fromCharCode(e.which)   // the rest
	} else {
		return;// special key
	}
	theKey=theKey.toUpperCase();



	if(theKey==&#x27;A&#x27;){
		if(inputState.A === false){
			var box = part_getChildrenByTag(focusRow,&quot;TD&quot;)[4].childNodes[0];
			if(box.value === &quot;on&quot;){
				box.click();
			}
		}
		inputState.A=true;
	}
	if(theKey==&#x27;S&#x27;){
		if(inputState.S === false){
			var rowList = part_getChildrenByTag(document.getElementById(&quot;body_id&quot;),&quot;TR&quot;);
			var tabLen = rowList.length;
			if(focusIdx &lt; tabLen-1){
				rowList[focusIdx+1].onclick();
			}
		}
		inputState.S=true;
	}
	if(theKey==&#x27;D&#x27;){
		if(inputState.D === false){
			var box = part_getChildrenByTag(focusRow,&quot;TD&quot;)[4].childNodes[0];
			if(box.value === &quot;off&quot;){
				box.click();
			}
		}
		inputState.D=true;
	}
	if(theKey==&#x27;W&#x27;){
		if(inputState.W === false){
			var rowList = part_getChildrenByTag(document.getElementById(&quot;body_id&quot;),&quot;TR&quot;);
			var tabLen = rowList.length;
			if(focusIdx &gt; 0){
				rowList[focusIdx-1].onclick();
			}
		}
		inputState.W=true;
	}
	return;

}




/**
*
* Accepts a key press release and, if the key release corresponds to one
* of the keys used for manipulating the view, sets the proper components
* of &quot;inputState&quot; to false
*
* @method part_registerUp
* @for partTableGlobal
*
*
* @param {Event} e The key up event to be supplied to the function by a key up event
* listener on the web page
* @return {Void}
*
*/
function part_registerUp(e){


	var theKey;
	if (e.which == null) {
		theKey= String.fromCharCode(e.keyCode) // IE
	} else if (e.which!=0 /*&amp;&amp; e.charCode!=0*/) {
		theKey= String.fromCharCode(e.which)   // the rest
	} else {
		return;// special key
	}
	theKey=theKey.toUpperCase();



	if(theKey==&#x27;A&#x27;){
		inputState.A=false;
	}
	if(theKey==&#x27;S&#x27;){
		inputState.S=false;
	}
	if(theKey==&#x27;D&#x27;){
		inputState.D=false;
	}
	if(theKey==&#x27;W&#x27;){
		inputState.W=false;
	}
	return;

}







//document.getElementById(&quot;downloadLink&quot;).setAttribute(&quot;style&quot;,&quot;display: none&quot;);





// Returns a list of all immediate children of the input html element which have the given tag name
/**
*
* Given an HTML element and a string, returns a list containing all child elements
* of the given element with a tag equivalent to the given string
*
* @method part_getChildrenByTag
* @for partTableGlobal
* @param {HTML Element} theNode The HTML element whose children are to be searched
* @param {String} tag The string to be used when searching for element children
* @return {Void}
*
*/
function part_getChildrenByTag(theNode,tag){
	var childs=theNode.children;
	var pos=0;
	var lim=childs.length;
	var result=[];
	while(pos&lt;lim){
		if(childs[pos].tagName===tag){
			result.push(childs[pos]);
		}
		pos++;
	}
	return result;
}


// Returns the first child node in the given document element with the given class
/**
*
* Given a jQuery object and a string, returns the first child of the given element with
* a tag equivalent to the given string.
*
* @method part_grab
* @for partTableGlobal
* @param {jQuery Object} theTree The jQuery object whose child is to be returned
* @param {String} theMember The name of the tag being searched
* @return {jQuery Object} The first child with the given tag. If such a child does not
* exist, null is returned.
*
*/
function part_grab(theTree,theMember){
	if($(theTree).children(theMember).length!=0){
		return $(theTree).children(theMember)[0];
	}
	else{
		return null;
	}
}


// Returns the nth child from the list of children nodes in the given document element with the given class
/**
*
* Given a jQuery object and an integer &quot;N&quot;, returns the Nth child of the given element with
* the given tag.
*
* @method part_grabInd
* @for partTableGlobal
* @param {jQuery Object} theTree The jQuery object whose child is to be returned
* @param {String} theMember The name of the tag being searched
* @param {String} theIndex The ordinal of the matching child to be returned
* @return {jQuery Object} The child meeting the tag and ordinal requirement.
* If such a child does not exist, null is returned.
*
*/
function part_grabInd(theTree,theMember, theIndex){
	if($(theTree).children(theMember).length&gt;theIndex){
		return $(theTree).children(theMember)[theIndex];
	}
	else{
		return null;
	}
}



// Adds an entry to the table with the information from the given document element
/**
*
* Given a jQuery object representation of a part entry, inserts an html representation
* of that entry in the table
*
* @method part_addEntry
* @for partTableGlobal
* @param {jQuery Object} theEntry The jQuery object containing the representation of a table
* entry, as extracted from an XML document
* @return {Void}
*
*/
function part_addEntry(theEntry){

	var theName=part_grab(theEntry,&quot;name&quot;).innerHTML;
	var theVolume=&quot;&lt;text&gt;&quot;+Number.parseFloat(part_grab(theEntry,&quot;volume&quot;).innerHTML).toFixed(8)+&quot;&lt;/text&gt;&lt;br/&gt;&quot;+volElem;

	var theMass=massElem;
	var theCertainty=Number.parseFloat(part_grab(theEntry,&quot;fastener_certainty&quot;).innerHTML);
	var theSurfaceArea=Number.parseFloat(part_grab(theEntry,&quot;surface_area&quot;).innerHTML).toFixed(8);

	//console.log(theCertainty);

	var fstChecked=&quot;&lt;input type=&#x27;checkbox&#x27; onchange=&#x27;part_flipCheck(this)&#x27; value=&#x27;off&#x27;&gt;&lt;/input&gt;&quot;;
	//console.log(theCertainty);
	if(theCertainty&gt;0.5){
		//console.log(&quot;Box is checked&quot;);
		fstChecked=&quot;&lt;input type=&#x27;checkbox&#x27; onchange=&#x27;part_flipCheck(this)&#x27; value=&#x27;on&#x27; checked&gt;&lt;/input&gt;&quot;;
	}

	var theAmbiguity=1-2*Math.abs(theCertainty-0.5);
	theAmbiguity=theAmbiguity.toFixed(2);

	theTable.row.add( [
		theName,
		theVolume,
		theSurfaceArea,
		theMass,
		fstChecked,
		theAmbiguity
	] ).draw();

}





// Creates an XML file out of the information present in the table and then adds a download link to the page
/**
*
* Parses through each entry in the table and, if all entries are fully filled out, converts the table into an
* XML file and adds a download link for that file to the webpage
*
* @method part_renderXML
* @for partTableGlobal
* @return {Void}
*
*/
function part_renderXML(){

	console.log(theTable.rows().data());

	var result=&quot;&lt;?xml version=&#x27;1.0&#x27; encoding=&#x27;utf-8&#x27;?&gt;\n&lt;parts_properties xmlns:xsd=&#x27;http://www.w3.org/2001/XMLSchema&#x27; xmlns:xsi=&#x27;http://www.w3.org/2001/XMLSchema-instance&#x27;&gt;\n&quot;;

	theTable=document.getElementById(&quot;body_id&quot;);


	var theEntries=part_getChildrenByTag(theTable,&quot;TR&quot;);

	var entryPos=0;
	var entryLim=theEntries.length;

	var theCells;
	var thisResult;


	while(entryPos&lt;entryLim){

		thisResult=part_renderEntry(part_getChildrenByTag(theEntries[entryPos],&quot;TD&quot;));
		if(thisResult!=null){
			result=result+thisResult;
		}
		else{
			return null;
		}

		entryPos++;
	}

	result+=&quot;&lt;/parts_properties&gt;&quot;;



	outText = result;
	requestAdvance(3);


}





function part_render() {

		// The function that will manage frame requests
		requestAnimationFrame( part_render );


		focusPart.Mesh.geometry.computeBoundingBox();
		focusBox=focusPart.Mesh.geometry.boundingBox.clone();

		focusPoint= new THREE.Vector3(
									  (focusBox.min.x+focusBox.max.x)/2,
									  (focusBox.min.y+focusBox.max.y)/2,
									  (focusBox.min.z+focusBox.max.z)/2
									 );

		thePos.normalize();

		thePos.applyEuler(theEul);
		theEul.set(0,0,0,&#x27;XYZ&#x27;);
		thePos.multiplyScalar(theDistance);
		camera.position.copy(thePos);
		camera.position.add(focusPoint);
		camera.lookAt(focusPoint);
		camera.updateMatrix();

		sunLight.position.set( (camera.position.x-focusPoint.x)*2+focusPoint.x,
							   (camera.position.y-focusPoint.y)*2+focusPoint.y,
							   (camera.position.z-focusPoint.z)*2+focusPoint.z );
		sunLight.target.position=focusPoint;

		updateAxisLines();

		renderer.render(scene, camera);
	};




// Converts the information in the given table entry to an XML element (as a plaintext string)
/**
*
* Given an html row element containing data regarding a part, converts the information into an
* xml formatted string and returns it
*
* @method part_renderEntry
* @for partTableGlobal
* @param {HTML Element} theCells An html row element containing information about a part
* @return {String} XML representation of the table entry
*
*/
function part_renderEntry(theCells){

	var massCell=theCells[3];
	massCell=part_getChildrenByTag(massCell,&quot;DIV&quot;)[0];

	var texts = part_getChildrenByTag(massCell,&quot;TEXT&quot;);
	var inputs = part_getChildrenByTag(massCell,&quot;INPUT&quot;);
	var conv = part_conversion(document.getElementById(&quot;massUnits&quot;));

	var massText=&quot;&quot;;
	if(inputs.length==0 || isNaN(Number.parseFloat(inputs[0].value))){
		console.log(inputs);
		alert(&quot;Mass data not provided for one or more cells&quot;);
		return null;
	}
	else if(texts.length==1){
		if(inputs.length==1){
			if(inputs[0].value.toString()===&quot;&quot;){
				return null;
			}
			massText=&quot;  &lt;mass&gt;&quot;+(parseFloat(inputs[0].value)*conv)+&quot;&lt;/mass&gt;\n&quot;;
		}
		else{
			alert(&quot;HTML Corrupted&quot;);
		}
	}
	else if(texts.length==2){

		if(texts[0].innerHTML.toString()===&quot;&quot; || isNaN(Number.parseFloat(texts[0].innerHTML))){
			return null;
		}
		massText=&quot;  &lt;mass&gt;&quot;+(parseFloat(texts[0].innerHTML)*conv)+&quot;&lt;/mass&gt;\n&quot;;
	}
	else{
		alert(&quot;HTML Corrupted&quot;);
	}


	var checkText=&quot;  &lt;fastener_certainty&gt;0&lt;/fastener_certainty&gt;\n&quot;;

	if(part_getChildrenByTag(theCells[4],&quot;INPUT&quot;)[0].value==&quot;on&quot;){
		checkText=&quot;  &lt;fastener_certainty&gt;1&lt;/fastener_certainty&gt;\n&quot;;
	}


	var result=&quot;&quot;;
	result=result+&quot;&lt;part_properties&gt;\n&quot;;
	result=result+&quot;  &lt;name&gt;&quot;+theCells[0].innerHTML+&quot;&lt;/name&gt;\n&quot;;
	result=result+massText;
	if(part_getChildrenByTag(theCells[1],&quot;TEXT&quot;)[0].innerHTML==&quot;&quot; || isNaN(Number.parseFloat(part_getChildrenByTag(theCells[1],&quot;TEXT&quot;)[0].innerHTML))){
		alert(&quot;Volume data not provided for one or more cells&quot;);
		return null;
	}
	result=result+&quot;  &lt;volume&gt;&quot;+part_getChildrenByTag(theCells[1],&quot;TEXT&quot;)[0].innerHTML+&quot;&lt;/volume&gt;\n&quot;;
	result=result+&quot;  &lt;surface_area&gt;&quot;+theCells[2].innerHTML+&quot;&lt;/surface_area&gt;\n&quot;;
	result=result+checkText;
	result=result+&quot;&lt;/part_properties&gt;\n&quot;;
	return result;

}




/*
function hollowOpt(theCheckBox){
	theCheckBox.parentElement.innerHTML=&quot;&lt;input type=&#x27;text&#x27; onchange=&#x27;revertHollowOpt(this)&#x27;&gt; &lt;/input&gt;&quot;;
}

function revertHollowOpt(theTextBox){
	if(isNaN(Number.parseFloat(theTextBox.value))){
		theTextBox.parentElement.innerHTML=&quot;&lt;text&gt;hollow &lt;/text&gt;&lt;input type=&#x27;checkbox&#x27; onchange=&#x27;hollowOpt(this)&#x27;&gt; &lt;/input&gt;&quot;;
	}
}
*/

// Adds in plain mass input
/**
*
* A function automatically called by button elements associated with the mass option
* in an entry&#x27;s mass section when pressed. Changes the parent mass section to contain a
* text input element and a button allowing the user to switch over to density input.
*
* @method part_insertMassInput
* @for partTableGlobal
* @param {HTML Element} theButton The button that calls this function
* @return {Void}
*
*/
function part_insertMassInput(theButton){
	theButton.parentElement.innerHTML=	&quot;&lt;div class=&#x27;masselem&#x27;&gt;&quot;+
										&quot;&lt;text&gt;Mass:&lt;/text&gt; &quot;+
										&quot;&lt;input type=&#x27;text&#x27;&gt;&lt;/input&gt;&quot;+
										&quot;&lt;button onclick=&#x27;part_insertDensityInput(this)&#x27;&gt;Input By Volume+Density&lt;/button&gt;&quot;+
										&quot;&lt;/div&gt;&quot;;
}

// Adds in input by part density
/**
*
* A function automatically called by button elements associated with the density option
* in an entry&#x27;s mass section when pressed. Changes the parent mass section to contain a
* text input element and a button allowing the user to switch over to mass input.
*
* @method part_insertDensityInput
* @for partTableGlobal
* @param {HTML Element} theButton The button that calls this function
* @return {Void}
*
*/
function part_insertDensityInput(theButton){
	theButton.parentElement.innerHTML=	&quot;&lt;div class=&#x27;masselem&#x27;&gt;&quot;+
										&quot;&lt;text&gt;&lt;/text&gt;&lt;text&gt;Density:&lt;/text&gt; &quot;+
										&quot;&lt;input type=&#x27;text&#x27; onchange=&#x27;part_insertMassDisplay(this)&#x27;&gt;&lt;/input&gt;&quot;+
										densityDiv+
										&quot;&lt;button onclick=&#x27;part_insertMassInput(this)&#x27; &gt;Input By Mass&lt;/button&gt;&quot;+
										&quot;&lt;/div&gt;&quot;;
}


// Adds in input for part surface thickness, hiding the origional volume
/**
*
* A function automatically called by button elements associated with the hollow option
* in an entry&#x27;s volume section when pressed. Changes the parent volume section to contain a
* text input element and a button allowing the user to indicate the part is not hollow.
*
* @method part_insertHollowInput
* @for partTableGlobal
* @param {HTML Element} theButton The button that calls this function
* @return {Void}
*
*/
function part_insertHollowInput(theButton){
	var storage=&quot;&lt;p style=&#x27;display: none;&#x27;&gt;&quot;+Number.parseFloat(part_getChildrenByTag(theButton.parentElement,&quot;TEXT&quot;)[0].innerHTML)+&quot;&lt;/p&gt;&quot;;
	var display=&quot;&lt;text&gt;&lt;/text&gt;&quot;;
	var backButton=&quot;&lt;button onclick=&#x27;removeHollowInput(this)&#x27;&gt;Is Not Hollow&lt;/button&gt;&quot;;
	var thicknessBox=&quot;Thickness: &lt;input type=&#x27;text&#x27; onchange=&#x27;part_insertVolumeDisplay(this)&#x27;&gt;&lt;/input&gt;&quot;;
	theButton.parentElement.innerHTML=storage+display+thicknessBox+backButton;
}


// Removes thickness input and displays original volume
/**
*
* A function automatically called by button elements associated with the hollow option
* in an entry&#x27;s volume section when pressed. Changes the parent volume section to contain
* only a mass value and a button allowing the user to indicate the part is hollow.
*
* @method removeHollowInput
* @for partTableGlobal
* @param {HTML Element} theButton The button that calls this function
* @return {Void}
*
*/
function removeHollowInput(theButton){
	var storage=&quot;&lt;text style=&#x27;display: block;&#x27;&gt;&quot;+Number.parseFloat(part_getChildrenByTag(theButton.parentElement,&quot;P&quot;)[0].innerHTML)+&quot;&lt;/text&gt;&quot;;
	var backButton=&quot;&lt;button onclick=&#x27;part_insertHollowInput(this)&#x27;&gt;Is Hollow&lt;/button&gt;&quot;;
	theButton.parentElement.innerHTML=storage+backButton;
}




// Updates the displayed volume based off of the part&#x27;s surface area and thickness
/**
*
* A function automatically called by text input elements associated with the hollow option
* in an entry&#x27;s volume section when changed. Changes the currently displayed volume to
* match the given thickness
*
* @method part_insertVolumeDisplay
* @for partTableGlobal
* @param {HTML Element} theBox The text input element that calls this function
* @return {Void}
*
*/
function part_insertVolumeDisplay(theBox){
	var theThickness=Number.parseFloat(part_getChildrenByTag(theBox.parentElement,&quot;INPUT&quot;)[0].value);
	var area=Number.parseFloat(part_getChildrenByTag(theBox.parentElement.parentElement.parentElement,&quot;TD&quot;)[2].innerHTML);
	var vol=theThickness*area;
	part_getChildrenByTag(theBox.parentElement,&quot;TEXT&quot;)[0].innerHTML=vol.toString()+&quot;\n&quot;;
}


// Updates the displayed mass based off of volume and density
/**
*
* A function automatically called by text input elements associated with the density option
* in an entry&#x27;s mass section when changed. Changes the currently displayed mass to
* match the given density
*
* @method part_insertMassDisplay
* @for partTableGlobal
* @param {HTML Element} theBox The text input element that calls this function
* @return {Void}
*
*/
function part_insertMassDisplay(theBox){
	var theDensity=Number.parseFloat(part_getChildrenByTag(theBox.parentElement,&quot;INPUT&quot;)[0].value);
	var theVolume=Number.parseFloat(part_getChildrenByTag(part_getChildrenByTag(theBox.parentElement.parentElement.parentElement,&quot;TD&quot;)[1],&quot;TEXT&quot;)[0].innerHTML);
	var mass=theDensity*theVolume;
	part_getChildrenByTag(theBox.parentElement,&quot;TEXT&quot;)[0].innerHTML= (mass.toFixed(8)).toString()+&quot;\n&quot;;
}




// Adds in density dropdown
/**
*
* A function automatically called by button elements associated with accessing sample densities.
* Adds a div element containing several sample density options.
*
* @method part_doDensityDrop
* @for partTableGlobal
* @param {HTML Element} theButton The button element that called this function
* @return {Void}
*
*/
function part_doDensityDrop(theButton){
	theButton.parentElement.innerHTML=undropDensityButton+densityMenu;
}


// Removes density dropdown
/**
*
* A function automatically called by button elements associated with accessing sample densities.
* Removes the sample density option div element.
*
* @method unpart_doDensityDrop
* @for partTableGlobal
* @param {HTML Element} theButton The button element that called this function
* @return {Void}
*
*/
function unpart_doDensityDrop(theButton){
	theButton.parentElement.innerHTML=dropDensityButton;
}




// Sets the value of the density of the part to the density associated with the calling button
/**
*
* A function automatically called by button elements associated with sample densities. Will fill
* the associated density input box with the value associated with the inner text of the button.
*
* @method part_changeDensity
* @for partTableGlobal
* @param {HTML Element} theButton The button element that called this function
* @return {Void}
*
*/
function part_changeDensity(theButton){

	var mat=theButton.innerHTML;
	var val;
	var coef=1000*1000*1000;
	if(mat==&quot;Aluminum&quot;){
		val=2700/coef;
	}
	else if(mat==&quot;Glass&quot;){
		val=2520/coef;
	}
	else if(mat==&quot;Plastic (Hi-Density)&quot;){
		val=1950/coef;
	}
	else if(mat==&quot;Plastic (Med-Density)&quot;){
		val=1100/coef;
	}
	else if(mat==&quot;Plastic (Low-Density)&quot;){
		val=900/coef;
	}
	else if(mat==&quot;Rubber&quot;){
		val=1270/coef;
	}
	else if(mat==&quot;Steel&quot;){
		val=7859/coef;
	}
	else if(mat==&quot;Titanium&quot;){
		val=4507/coef;
	}
	else if(mat==&quot;Wood&quot;){
		val=6300/coef;
	}
	else{
		return;
	}

	part_getChildrenByTag(theButton.parentElement.parentElement.parentElement,&quot;INPUT&quot;)[0].value=val;
	part_insertMassDisplay(part_getChildrenByTag(theButton.parentElement.parentElement.parentElement,&quot;INPUT&quot;)[0]);

}


// Sets the value of the checkbox to the appropriate value
/**
*
* A function automatically called by text box elements upon becoming checked/unchecked.
* Sets an internal value to indicate the checked state of the element.
*
* @method part_flipCheck
* @for partTableGlobal
* @param {HTML Element} theBox The checkbox element calling this function
* @return {Void}
*
*/
function part_flipCheck(theBox){

	var row = theBox.parentElement.parentElement;

	if(theBox.value==&#x27;on&#x27;){
		theBox.value=&#x27;off&#x27;;
		row.classList.add(&quot;nfast&quot;);
	}
	else{
		theBox.value=&#x27;on&#x27;;
		row.classList.add(&quot;fast&quot;);
	}
	focusRow.onclick();

}



/**
*
* Takes the value present in the global density input textbox and applies it to all
* parts currently in the table.
*
* @method part_fillGlobalDensity
* @for partTableGlobal
* @return {Void}
*
*/
function part_fillGlobalDensity(){

	var densInp= document.getElementById(&quot;GlobalDensityInput&quot;);
	var theDensity;
	if(densInp.value===&quot;&quot;){

		console.log(densInp);
		return;
	}
	else{
		theDensity=parseFloat(densInp.value);
	}

	var massElems = document.getElementsByClassName(&#x27;masselem&#x27;);
	console.log(massElems);
	var pos=0;
	var lim=massElems.length;
	while(pos&lt;lim){
		massElems[pos].innerHTML=		&quot;&lt;text&gt;&lt;/text&gt;&lt;text&gt;&lt;br&gt;Density:&lt;/text&gt; &quot;+
										&quot;&lt;input type=&#x27;text&#x27; onchange=&#x27;part_insertMassDisplay(this)&#x27; value=&#x27;&quot;+(theDensity.toFixed(8)).toString()+&quot;&#x27;&gt;&quot;+
										&quot;&lt;/input&gt;&quot;+
										densityDiv+
										&quot;&lt;button onclick=&#x27;part_insertMassInput(this)&#x27; &gt;Input By Mass&lt;/button&gt;&quot;;
		part_insertMassDisplay(part_getChildrenByTag(massElems[pos],&quot;BUTTON&quot;)[0]);
		pos++;
	}

}






/**
*
* Makes it so that the table row associated with this call has its part model
* displayed
*
* @method part_clickFocus
* @for partTableGlobal
* @return {Void}
*
*/
function part_clickFocus(){
	console.log(&quot;Table click registered&quot;);
	var pos = 0;
	var lim = parts.length;
	
	while(pos&lt;lim){
		//console.log(part_getChildrenByTag(this,&quot;TD&quot;)[0].innerHTML);
		//console.log(grabName(parts[pos].Name));
		//console.log(&quot;~~~~~&quot;);
		if(grabName(parts[pos].Name)  === part_getChildrenByTag(this,&quot;TD&quot;)[0].innerHTML){
			console.log(&quot;Found match between &quot;+grabName(parts[pos].Name)+&quot; and &quot;+part_getChildrenByTag(this,&quot;TD&quot;)[0].innerHTML)
			if(focusPart !== null){
				focusPart.Mesh.material = new THREE.MeshLambertMaterial(wireSettings);
			}

			//console.log(&quot;AAAAAAH&quot;);
			if(focusRow !== null){
				var tdList = part_getChildrenByTag(focusRow,&quot;TD&quot;);
				var tdPos = 0;
				var tdLim = tdList.length;
				while(tdPos&lt;tdLim){
					tdList[tdPos].classList.remove(&quot;focus&quot;);
					tdPos++;
				}
			}

			//console.log(&quot;AAAAAAH&quot;);

			focusPart = parts[pos];

			//console.log(&quot;AAAAAAH&quot;);
			//console.log(focusPart);
			focusRow = this;

			if(part_getChildrenByTag(this,&quot;TD&quot;)[4].childNodes[0].value === &quot;on&quot;){
				focusPart.Mesh.material = new THREE.MeshLambertMaterial({color: 0x884444});
			}
			else{
				focusPart.Mesh.material = new THREE.MeshLambertMaterial({color: 0x444488});
			}
			var tdList = part_getChildrenByTag(focusRow,&quot;TD&quot;);
			var tdPos = 0;
			var tdLim = tdList.length;
			while(tdPos&lt;tdLim){
				tdList[tdPos].classList.add(&quot;focus&quot;);
				tdPos++;
			}

			var rowList = part_getChildrenByTag(document.getElementById(&quot;body_id&quot;),&quot;TR&quot;);
			var rowPos = 0;
			var lim = rowList.length;
			while(rowPos&lt;lim){
				if(rowList[rowPos] == this){
					break;
				}
				rowPos++;
			}
			var hStep = this.clientHeight;
			this.parentElement.parentElement.parentElement.scrollTop = hStep*rowPos;
			focusIdx = rowPos;

		}
		pos++;
	}

}







/**
*
* Sets up every table entry HTML element with the focus function as its &quot;onclick&quot;
* attribute
*
* @method part_setupClickFocus
* @for partTableGlobal
* @return {Void}
*
*/
function part_setupClickFocus(){

	var rowElems = part_getChildrenByTag(document.getElementById(&quot;body_id&quot;),&quot;TR&quot;);
	var pos=0;
	var lim=rowElems.length;
	while(pos&lt;lim){
		rowElems[pos].onclick = part_clickFocus;
		pos++;
	}

}







/**
*
* Sets up every table entry HTML element with color highlighting
*
* @method part_setupHighlighting
* @for partTableGlobal
* @return {Void}
*
*/
function part_setupHighlight(){

	var rowElems = part_getChildrenByTag(document.getElementById(&quot;body_id&quot;),&quot;TR&quot;);
	console.log(rowElems);
	var pos=0;
	var lim=rowElems.length;
	while(pos&lt;lim){
		if(rowElems[pos].childNodes[4].childNodes[0].value === &quot;on&quot;){
			rowElems[pos].classList.add(&quot;fast&quot;);
		}
		else{
			rowElems[pos].classList.add(&quot;nfast&quot;);
		}
		pos++;
	}

}






/**
*
* Accepts a string and outputs a part_conversion value for the string&#x27;s described unit to the standard
* units of this application. If no suitable unit is identified in the string, the part_conversion value
* returned is 0.
*
* @method part_conversion
* @for partTableGlobal
* @param {String} theString A string representation of the unit being looked up
* @return {Float} the unit part_conversion value
*
*/
function part_conversion (theString){

	switch(theString){
		case &quot;millimeters&quot; :
			return 1.0;
			break;
		case &quot;centimeters&quot; :
			return 10.0;
			break;
		case &quot;meters&quot;:
			return 1000.0;
			break;
		case &quot;inches&quot;:
			return 25.4;
			break;
		case &quot;feet&quot;:
			return 304.8;
			break;
		case &quot;kilograms&quot;:
			return 1.0;
			break;
		case &quot;pounds&quot;:
			return 0.4536;
			break;
		default:
			return 1.0;
			break;
	}
	return 1.0;

}





/**
*
* Returns a blank mass input element for use in the table
*
* @method part_makeMassElem
* @for partTableGlobal
* @return {HTML element} a blank mass input element
*
*/
function part_makeMassElem(){

	var result=document.createElement(&quot;DIV&quot;);
	result.className=&quot;masselem&quot;;
	var massButton=document.createElement(&quot;BUTTON&quot;);
	massButton.onclick=&quot;part_insertMassInput(this)&quot;;
	massButton.innerHTML=&quot;Input By Mass&quot;;
	var densityButton=document.createElement(&quot;BUTTON&quot;);
	densityButton.onclick=&quot;part_insertDensityInput(this)&quot;;
	densityButton.innerHTML=&quot;Input By Volume+Density&quot;;
	result.appendChild(massButton);
	result.appendChild(densityButton);
	return result;

}




/**
*
* Returns a blank volume input element for use in the table
*
* @method part_makeVolElem
* @for partTableGlobal
* @return {HTML element} a blank volume input element
*
*/
function part_makeVolElem(){

	result=document.creatElement(&quot;BUTTON&quot;);
	result.onclick=&quot;part_insertHollowInput(this)&quot;;
	result.innerHTML=&quot;Is Hollow&quot;;
	return result;

}




/**
*
* Returns a standard button for a density dropdown menu
*
* @method part_makeDropButton
* @for partTableGlobal
* @return {HTML element} a standard density dropdown button
*
*/
function part_makeDropButton(){

	result=document.creatElement(&quot;BUTTON&quot;);
	result.className=&quot;dropbtn&quot;;
	result.onclick=&quot;part_doDensityDrop(this)&quot;;
	result.innerHTML=&quot;Sample Densities&quot;;
	return result;

}


/**
*
* Returns a standard button to remove a density dropdown element
*
* @method part_makeUndropButton
* @for partTableGlobal
* @return {HTML element} a standard density dropdown removal button
*
*/
function part_makeUndropButton(){

	result=document.creatElement(&quot;BUTTON&quot;);
	result.className=&quot;dropbtn&quot;;
	result.onclick=&quot;unpart_doDensityDrop(this)&quot;;
	result.innerHTML=&quot;Sample Densities&quot;;
	return result;

}



/**
*
* Returns a standard sample density dropdown menu
*
* @method part_makeDensityDiv
* @for partTableGlobal
* @return {HTML element} a sample density dropdown menu
*
*/
function part_makeDensityDiv(){

	result=document.creatElement(&quot;DIV&quot;);
	result.className=&quot;dropdown&quot;;
	result.innerHTML=densityMenu;
	return result;

}








/**
*
* Given a mouseup event, sets corresponding internal button states for mouse-related controls
*
* @method part_doMouseUp
* @for directionConfirmGlobal
* @param {mouseup event} theEvent
* @return {Void}
*
*/
function part_doMouseUp(theEvent){
	if(theEvent.button == 0){
		leftDrag = false;
	}
	else if(theEvent.button == 2){
		rightDrag = false;
	}
}


/**
*
* Given a mousedown event, sets corresponding internal button states for mouse-related controls
*
* @method part_doMouseDown
* @for directionConfirmGlobal
* @param {mousedown event} theEvent
* @return {Void}
*
*/
function part_doMouseDown(theEvent){
	if(theEvent.button == 0){
		leftDrag = true;
	}
	else if(theEvent.button == 2){
		rightDrag = true;
	}
}



/**
*
* Given a mouseleave event, sets corresponding internal button states for mouse-related controls
*
* @method part_doMouseLeave
* @for directionConfirmGlobal
* @param {mouseup event} theEvent
* @return {Void}
*
*/
function part_doMouseLeave(theEvent){
	leftDrag = false;
	rightDrag = false;
	lastMouse = null;
}


/**
*
* Given a mousedrag event, rotates the camera or adds a vector to the currently displayed pair,
* depending upon whether or not the left or right mouse button is depressed
*
* @method doPartDrag
* @for directionConfirmGlobal
* @param {mouseup event} theEvent
* @return {Void}
*
*/
function part_doDrag (theEvent){
	console.log(&quot;doPartDrag called&quot;);
	if(leftDrag===true){
		thePos.normalize();
		theEul.set(theEvent.movementY*(-0.008)*Math.cos(Math.atan2(thePos.x,thePos.z)),
				   theEvent.movementX*(-0.008),
				   theEvent.movementY*(0.008)*Math.sin(Math.atan2(thePos.x,thePos.z)),
				   &#x27;ZYX&#x27;);
	}

}


/**
*
* Prevents the default response of the given event (used to prevent dropdown menus when right
* clicking on the display).
*
* @method part_justDont
* @for directionConfirmGlobal
* @param {Event Object} theEvent The event to suppress the default response of.
* @return {Void}
*
*/
function part_justDont(theEvent){
	theEvent.preventDefault();
}







/**
*
* Given a mousewheel event, changes the distance of the camera from the center of the scene
*
* @method part_doZoom
* @for directionConfirmGlobal
* @param {mouseup event} theEvent
* @return {Void}
*
*/
function part_doZoom(theEvent){
	var theDelta = theEvent.deltaY == 0 ? 0 : ( theEvent.deltaY &gt; 0 ? 1 : -1 );
	theDistance=theDistance*Math.pow(1.001,theDelta*(-40));
}



function part_doSetup(){

	initAxisLines();

	part_setupClickFocus();
	part_setupHighlight();
	part_getChildrenByTag(document.getElementById(&quot;body_id&quot;),&quot;TR&quot;)[0].click();

}



startupScripts[&quot;2&quot;] = function (){




	fileReaders=[];
	inputXML=null;
	textFile=null;
	focusBox=null;
	focusPoint=null;
	focusIdx=null;

	assemblyPairs=[];
	namePairs=[];
	theDirections=[];
	theXML=null;
	thePos= new THREE.Vector3(1,0,0);
	lastMouse=null;
	theDistance= 300;
	theVectors= []; //new THREE.Line(  new THREE.Geometry(),  new THREE.LineBasicMaterial({color: 0x0000ff}))

	theEul= new THREE.Euler(0,0,0,&#x27;XYZ&#x27;);
	baseQuat = new THREE.Quaternion(1,0,0,0);
	deltaQuat = new THREE.Quaternion(1,0,0,0);

	leftDrag = false;
	rightDrag = false;


	inputState={

		W: false,
		A: false,
		S: false,
		D: false,

	}


	wireSettings={transparent: true, opacity: 0.1, color: 0x444444, wireframe: false};



	// Array for storing fileReaders to keep track of them
	fileReaders=[];


	// Setting up the table
	theTable= $(&#x27;#table_id&#x27;).DataTable({
		&quot;scrollY&quot;: &quot;300px&quot;,
		&quot;scroller&quot;: true,
		&quot;deferpart_render&quot;: false,
		&quot;paging&quot;: false,
		&quot;searching&quot;: false
	});

	document.addEventListener(&#x27;keydown&#x27;, part_registerDown , false);
	document.addEventListener(&#x27;keyup&#x27;, part_registerUp , false);
	document.getElementById(&quot;display&quot;).addEventListener(&quot;mousemove&quot;, part_doDrag);
	document.getElementById(&quot;display&quot;).addEventListener(&quot;wheel&quot;, part_doZoom);

	theXML=$.parseXML(inText);
	console.log(theXML);
	theEntries=part_grab(theXML,&quot;parts_properties&quot;);
	theEntries=$(theEntries).children(&quot;part_properties&quot;);
	console.log(theEntries);
	pos=0;
	lim=theEntries.length;
	//name = null;
	//classif = null;
	while(pos&lt;lim){
		part_addEntry(theEntries[pos]);
		pos++;
	}


	clearScene(&quot;display&quot;);


	part_doSetup();
	part_render();

}


    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
